<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Baseline Characteristics Table</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="table1_quarto_files/libs/clipboard/clipboard.min.js"></script>
<script src="table1_quarto_files/libs/quarto-html/quarto.js"></script>
<script src="table1_quarto_files/libs/quarto-html/popper.min.js"></script>
<script src="table1_quarto_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="table1_quarto_files/libs/quarto-html/anchor.min.js"></script>
<link href="table1_quarto_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="table1_quarto_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="table1_quarto_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="table1_quarto_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="table1_quarto_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<link href="table1_quarto_files/libs/table1-1.0/table1_defaults.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Baseline Characteristics Table</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<p>I think you’ll find <a href="https://haven.tidyverse.org/">tidyverse</a> extremely helpful - it is actually a bundle of packages. For the baseline characteristics table, the package <a href="https://haven.tidyverse.org/">table1</a> gets us pretty close to a final output. If you want to read more, see their <a href="https://cran.r-project.org/web/packages/table1/vignettes/table1-examples.html">vignette</a>. <a href="https://haven.tidyverse.org/">Haven</a> is a tidyverse package that reads SAS datasets directly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if you need to install, you would use:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(c("tidyverse", "table1"))</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load the relevant packages</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(table1)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-the-data" class="level2">
<h2 class="anchored" data-anchor-id="load-the-data">Load the data</h2>
<p>Here’s where you load the SAS dataset, using the haven package. First, you assign the object <code>tab1</code> (can be any name you want it to be) something using the <code>&lt;-</code> assignment operator, and you assign it the dataset returned by the <code>read_sas()</code> function from haven. There’s lots more options with this function than I use below, but the basics usually work well.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that R has case-sensitive variable/column names. Make your life a lot easier and rename variables to lowecase with the <code>rename_with()</code> function and <code>tolower</code> option, i.e., <code>rename_with(tolower)</code> (see below)</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note that the filepath needs forward slashes, or two backwards slashes,</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g., "C:/Users/Marta/...sas7bdat" or "C:\\Users\\Marta\\...sas7bdat"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># aim1cohort &lt;- read_sas("E:/.../.../...sas7bdat") %&gt;% </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   rename_with(tolower)    </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-wrangling-for-table1" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-for-table1">Data wrangling for table1</h2>
<p>I already have my data loaded in an object called <code>aim1cohort</code>, so I’m just going to assign it the new name <code>tab1</code>, but you would not need to run this if you run above to load the data.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
A note on ’pipe’s
</div>
</div>
<div class="callout-body-container callout-body">
<p>One thing that’s worth reading up on the <code>%&gt;%</code> “pipe”. See this <a href="https://magrittr.tidyverse.org/reference/pipe.html">here</a> or <a href="https://r4ds.had.co.nz/pipes.html">here</a>. It’s a tidyverse thing originally coming from the magrittr package. Because it’s quite popular, Base R has now incorporated its own pipe now which does almost exactly the same thing, but looks like this: <code>|\</code>. You can use ctrl+shift+M as a short-cut, and in your R-studio preferences, you can tell R-Studio whether to use the native pipe <code>|&gt;</code> or magrittr’s <code>%&gt;%</code>. Basically, it’s a way to pipe an object forward from one function to the next, as opposed to having to nest a bunch of functions within one another.</p>
</div>
</div>
<p>Ok, here’s the data wrangling code:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"C:/Users/ssmithm/Dropbox (UFL)/R Projects/K01-Initial_Antihtn_Prescribing/data/aim1cohort.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> aim1cohort </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> tab1 <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select only variables needed; ends_with() function is a nifty short cut to </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># grab all variables whose name ends with that string</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"patid"</span>,<span class="st">"source"</span>,<span class="st">"age"</span>,<span class="st">"age_cat"</span>, <span class="st">"hispanic"</span>,<span class="st">"sex"</span>,<span class="st">"race"</span>,<span class="st">"index_year"</span>, <span class="fu">ends_with</span>(<span class="st">"indicator"</span>), <span class="st">"combined_score_num"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate() is for creating new variables. Some of this should look pretty </span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># similar to what you're used to in SAS. </span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># c() function just combines multiple things and works similarly here to a</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># SAS parenthetical list, i.e., race in ("No Information", ...)</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">if_else</span>(race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"No Information"</span>,<span class="st">"Refuse to Answer"</span>,<span class="st">"Unknown"</span>), <span class="st">"Unknown"</span>, race),</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>         <span class="co"># factor() is a vector type for categoricals and it's important for</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         <span class="co"># table1 package because it's how table1 figures out what is categorical</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>         <span class="co"># vs. continuous. </span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">hispanic =</span> <span class="fu">factor</span>(hispanic),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">sex =</span> <span class="fu">factor</span>(sex),</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">index_year =</span> <span class="fu">factor</span>(index_year),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">statinindicator =</span> <span class="fu">factor</span>(statinindicator),</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">aspirinindicator =</span> <span class="fu">factor</span>(aspirinindicator),</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">smokingindicator =</span> <span class="fu">factor</span>(smokingindicator),</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">diabetesindicator =</span> <span class="fu">factor</span>(diabetesindicator),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">ckdindicator =</span> <span class="fu">factor</span>(ckdindicator),</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">esrdindicator =</span> <span class="fu">factor</span>(esrdindicator),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">hfejindicator =</span> <span class="fu">factor</span>(hfejindicator),</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">chdindicator =</span> <span class="fu">factor</span>(chdindicator),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">pcrindicator =</span> <span class="fu">factor</span>(pcrindicator),</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">strokeindicator =</span> <span class="fu">factor</span>(strokeindicator),</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">padindicator =</span> <span class="fu">factor</span>(padindicator),</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">ascvdindicator =</span> <span class="fu">factor</span>(ascvdindicator),</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>         <span class="at">afindicator =</span> <span class="fu">factor</span>(afindicator),</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>         <span class="at">copdindicator =</span> <span class="fu">factor</span>(copdindicator),</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>         <span class="at">asthmaindicator =</span> <span class="fu">factor</span>(asthmaindicator),</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">depressionindicator =</span> <span class="fu">factor</span>(depressionindicator),</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">goutindicator =</span> <span class="fu">factor</span>(goutindicator),</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">source =</span> <span class="fu">factor</span>(source),</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">anticogindicator =</span> <span class="fu">factor</span>(anticogindicator),</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">ktindicator =</span> <span class="fu">factor</span>(ktindicator),</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">osaindicator =</span> <span class="fu">factor</span>(osaindicator)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange() sorts.</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(patid) <span class="sc">%&gt;%</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># distinct() picks out distinct values, here of patid.</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(patid, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="co"># here we go in and work on specific columns of `tab1` dataset and </span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co"># order the levels (values) of that column in the way we want it presented in</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co"># the output table, using the factor() function. Basically, we're just taking </span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="co"># the column as is, and replacing it with the same data, but telling R what is </span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="co"># should be the intrinsic order of these values when R outputs anything with it. </span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a><span class="co"># (Not actually changing given values for a given observation)</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>tab1<span class="sc">$</span>race <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab1<span class="sc">$</span>race, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"American Indian or Alaska Native"</span>,</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"Asian"</span>,</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"Black or African American"</span>,</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"Native Hawaiian or Other Pacific"</span>,</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"White"</span>,</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"Multiple Race"</span>,</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"Other"</span>,</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"Unknown"</span>))</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>tab1<span class="sc">$</span>age_cat <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab1<span class="sc">$</span>age_cat, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt;45 y"</span>, <span class="st">"45-64 y"</span>, <span class="st">"&gt;65 y"</span>))</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>tab1<span class="sc">$</span>hispanic <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab1<span class="sc">$</span>hispanic, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Hispanic"</span>, <span class="st">"Not Hispanic"</span>, <span class="st">"Unknown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="labels-and-units" class="level2">
<h2 class="anchored" data-anchor-id="labels-and-units">Labels and Units</h2>
<p>Here we can apply label and unit attributes to each column. Labels will be printed (in the output table) as specified here, and will be appended with units, if they’re assigned. Note here I only assign one unit (to age), as most everything else is categorical. But, for example, BP would need units also if included.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>age) <span class="ot">&lt;-</span> <span class="st">"Age"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>age_cat) <span class="ot">&lt;-</span> <span class="st">"Age Category"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>sex) <span class="ot">&lt;-</span> <span class="st">"Sex"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>race) <span class="ot">&lt;-</span> <span class="st">"Race"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>hispanic) <span class="ot">&lt;-</span>  <span class="st">"Ethnicity"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>smokingindicator) <span class="ot">&lt;-</span> <span class="st">"Current Smoker"</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>diabetesindicator) <span class="ot">&lt;-</span> <span class="st">"Diabetes"</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>ckdindicator) <span class="ot">&lt;-</span> <span class="st">"Chronic kidney disease"</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>esrdindicator) <span class="ot">&lt;-</span> <span class="st">"End-stage renal disease"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>hfejindicator) <span class="ot">&lt;-</span> <span class="st">"Heart failure w/ reduced EF"</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>chdindicator) <span class="ot">&lt;-</span> <span class="st">"Coronary heart disease"</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>pcrindicator) <span class="ot">&lt;-</span> <span class="st">"Prior coronary revascularization"</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>strokeindicator) <span class="ot">&lt;-</span> <span class="st">"Prior stroke or TIA"</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>padindicator) <span class="ot">&lt;-</span> <span class="st">"Peripheral arterial disease"</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>ascvdindicator) <span class="ot">&lt;-</span> <span class="st">"History of clinical ASCVD"</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>afindicator) <span class="ot">&lt;-</span> <span class="st">"Atrial fibrillation"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>copdindicator) <span class="ot">&lt;-</span> <span class="st">"Chronic obstructive pulmonary disease"</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>asthmaindicator) <span class="ot">&lt;-</span> <span class="st">"Asthma"</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>depressionindicator) <span class="ot">&lt;-</span> <span class="st">"Depression"</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>combined_score_num) <span class="ot">&lt;-</span> <span class="st">"Combined Comorbidity Score"</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>statinindicator) <span class="ot">&lt;-</span> <span class="st">"Statin"</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>aspirinindicator) <span class="ot">&lt;-</span> <span class="st">"Aspirin"</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(tab1<span class="sc">$</span>index_year) <span class="ot">&lt;-</span> <span class="st">"Index Year"</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="fu">units</span>(tab1<span class="sc">$</span>age) <span class="ot">&lt;-</span> <span class="st">"years"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setting-up-the-output" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-the-output">Setting up the output</h2>
<p>Here we tell table1 to use our label list, as well as what columns to give us. This is important for stratified columns (e.g., Medicaid and Medicare, or those with EHR and those without EHR data). I think you can do as many strata as you want, though obviously a lot will not look good in the table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Render Table 1 ####</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># here, the first string is the column header, and following the = sign is </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># how to get just the patients that should be used for that column. </span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># so for everyone, we use the entire tab1 dataset. For Medicaid column, we </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># subset() tab1 to get only those people who have source = "FLM"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>strata_t1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">list</span>(<span class="st">"Overall Cohort"</span> <span class="ot">=</span> tab1),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(<span class="st">"Medicaid-Insured"</span> <span class="ot">=</span> <span class="fu">subset</span>(tab1, source <span class="sc">==</span> <span class="st">"FLM"</span>)),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(<span class="st">"Medicare-Insured"</span> <span class="ot">=</span> <span class="fu">subset</span>(tab1, source <span class="sc">==</span> <span class="st">"MED"</span>)))</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># tell table1 where to get our labels</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>labels_t1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>age),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>                   <span class="at">age_cat =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>age_cat),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sex =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>sex),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>                   <span class="at">race =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>race),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>                   <span class="at">hispanic =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>hispanic),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>                   <span class="at">smokingindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>smokingindicator),</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>                   <span class="at">diabetesindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>diabetesindicator),</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ckdindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>ckdindicator),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>                   <span class="at">esrdindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>esrdindicator),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">hfejindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>hfejindicator),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">chdindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>chdindicator),</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">pcrindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>pcrindicator),</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>                   <span class="at">strokeindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>strokeindicator),</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>                   <span class="at">padindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>padindicator),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ascvdindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>ascvdindicator),</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>                   <span class="at">afindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>afindicator),</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>                   <span class="at">copdindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>copdindicator),</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>                   <span class="at">asthmaindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>asthmaindicator),</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>                   <span class="at">depressionindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>depressionindicator),</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>                   <span class="at">combined_score_num =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>combined_score_num),</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>                   <span class="at">statinindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>statinindicator),</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>                   <span class="at">aspirinindicator =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>aspirinindicator),</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>                   <span class="at">index_year =</span> <span class="fu">render.varlabel</span>(tab1<span class="sc">$</span>index_year)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="some-functions-to-style-the-output" class="level2">
<h2 class="anchored" data-anchor-id="some-functions-to-style-the-output">Some functions to style the output</h2>
<p>Basically here we’re just making some stylistic choices about what we want output to look like for categorical variables, continuous variables, and for the column headers. See the URL above for more of a description of these. But, you probably don’t need to edit this at all for any tables you create.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add commas to Ns and cell counts</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>render.continuous <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">stats.default</span>(x, ...), <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"Mean \u00B1 SD"</span>  <span class="ot">=</span> <span class="fu">sprintf</span>(<span class="st">"%s \u00B1 %s"</span>, <span class="fu">signif_pad</span>(MEAN, <span class="dv">3</span>, <span class="at">big.mark=</span><span class="st">","</span>), <span class="fu">signif_pad</span>(SD, <span class="dv">3</span>, <span class="at">big.mark=</span><span class="st">","</span>))))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>render.categorical <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">""</span>, <span class="fu">sapply</span>(<span class="fu">stats.apply.rounding</span>(<span class="fu">stats.default</span>(x)), <span class="cf">function</span>(y) <span class="fu">with</span>(y, <span class="fu">sprintf</span>(<span class="st">"%s (%s%%)"</span>, <span class="fu">prettyNum</span>(FREQ, <span class="at">big.mark=</span><span class="st">","</span>), PCT))))</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>render.strat <span class="ot">&lt;-</span> <span class="cf">function</span>(label, n, ...) {</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sprintf</span>(<span class="st">"&lt;span class='stratlabel'&gt;%s&lt;br&gt;&lt;span class='stratn'&gt;(N=%s)&lt;/span&gt;&lt;/span&gt;"</span>, label, <span class="fu">prettyNum</span>(n, <span class="at">big.mark=</span><span class="st">","</span>))</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="render-the-table" class="level2">
<h2 class="anchored" data-anchor-id="render-the-table">Render the Table</h2>
<p>Now create the actual table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Render Table 1 -- Will need to Save the HTML for export off ResVault</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table1</span>(strata_t1, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>       labels_t1, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">droplevels =</span> <span class="cn">TRUE</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>       <span class="co"># these next three lines are just applying the functions we created above</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>       <span class="co"># basically can be read as "for rendering continuous variables, use the </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>       <span class="co"># function render.continuous()", etc. </span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">render.continuous =</span> render.continuous, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">render.strat =</span> render.strat, </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">render.categorical =</span> render.categorical)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="Rtable1"><table class="Rtable1">
<thead>
<tr>
<th class="rowlabel firstrow lastrow"></th>
<th class="firstrow lastrow"><span class="stratlabel">Overall Cohort<br><span class="stratn">(N=143,054)</span></span></th>
<th class="firstrow lastrow"><span class="stratlabel">Medicaid-Insured<br><span class="stratn">(N= 71,774)</span></span></th>
<th class="firstrow lastrow"><span class="stratlabel">Medicare-Insured<br><span class="stratn">(N= 71,280)</span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="rowlabel firstrow">Age (years)</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel lastrow">Mean ± SD</td>
<td class="lastrow">59.1 ± 21.6</td>
<td class="lastrow">46.5 ± 14.3</td>
<td class="lastrow">71.8 ± 20.1</td>
</tr>
<tr>
<td class="rowlabel firstrow">Age Category</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">&lt;45 y</td>
<td>38,213 (26.7%)</td>
<td>33,176 (46.2%)</td>
<td>5,037 (7.1%)</td>
</tr>
<tr>
<td class="rowlabel">45-64 y</td>
<td>51,007 (35.7%)</td>
<td>34,274 (47.8%)</td>
<td>16,733 (23.5%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">&gt;65 y</td>
<td class="lastrow">53,834 (37.6%)</td>
<td class="lastrow">4,324 (6.0%)</td>
<td class="lastrow">49,510 (69.5%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Sex</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">Female</td>
<td>81,555 (57.0%)</td>
<td>43,011 (59.9%)</td>
<td>38,544 (54.1%)</td>
</tr>
<tr>
<td class="rowlabel">Male</td>
<td>61,493 (43.0%)</td>
<td>28,760 (40.1%)</td>
<td>32,733 (45.9%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">Unknow</td>
<td class="lastrow">6 (0.0%)</td>
<td class="lastrow">3 (0.0%)</td>
<td class="lastrow">3 (0.0%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Race</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">American Indian or Alaska Native</td>
<td>334 (0.2%)</td>
<td>165 (0.2%)</td>
<td>169 (0.2%)</td>
</tr>
<tr>
<td class="rowlabel">Asian</td>
<td>1,447 (1.0%)</td>
<td>659 (0.9%)</td>
<td>788 (1.1%)</td>
</tr>
<tr>
<td class="rowlabel">Black or African American</td>
<td>33,814 (23.6%)</td>
<td>22,041 (30.7%)</td>
<td>11,773 (16.5%)</td>
</tr>
<tr>
<td class="rowlabel">Native Hawaiian or Other Pacific</td>
<td>33 (0.0%)</td>
<td>11 (0.0%)</td>
<td>22 (0.0%)</td>
</tr>
<tr>
<td class="rowlabel">White</td>
<td>70,156 (49.0%)</td>
<td>25,304 (35.3%)</td>
<td>44,852 (62.9%)</td>
</tr>
<tr>
<td class="rowlabel">Multiple Race</td>
<td>503 (0.4%)</td>
<td>167 (0.2%)</td>
<td>336 (0.5%)</td>
</tr>
<tr>
<td class="rowlabel">Other</td>
<td>20,555 (14.4%)</td>
<td>11,610 (16.2%)</td>
<td>8,945 (12.5%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">Unknown</td>
<td class="lastrow">16,212 (11.3%)</td>
<td class="lastrow">11,817 (16.5%)</td>
<td class="lastrow">4,395 (6.2%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Ethnicity</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">Hispanic</td>
<td>22,680 (15.9%)</td>
<td>13,016 (18.1%)</td>
<td>9,664 (13.6%)</td>
</tr>
<tr>
<td class="rowlabel">Not Hispanic</td>
<td>99,483 (69.5%)</td>
<td>44,696 (62.3%)</td>
<td>54,787 (76.9%)</td>
</tr>
<tr>
<td class="rowlabel">Unknown</td>
<td>16,203 (11.3%)</td>
<td>11,865 (16.5%)</td>
<td>4,338 (6.1%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">4688 (3.3%)</td>
<td class="lastrow">2197 (3.1%)</td>
<td class="lastrow">2491 (3.5%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Current Smoker</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>110,974 (77.6%)</td>
<td>54,739 (76.3%)</td>
<td>56,235 (78.9%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">32,080 (22.4%)</td>
<td class="lastrow">17,035 (23.7%)</td>
<td class="lastrow">15,045 (21.1%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Diabetes</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>113,421 (79.3%)</td>
<td>57,972 (80.8%)</td>
<td>55,449 (77.8%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">29,633 (20.7%)</td>
<td class="lastrow">13,802 (19.2%)</td>
<td class="lastrow">15,831 (22.2%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Chronic kidney disease</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>125,428 (87.7%)</td>
<td>66,663 (92.9%)</td>
<td>58,765 (82.4%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">17,626 (12.3%)</td>
<td class="lastrow">5,111 (7.1%)</td>
<td class="lastrow">12,515 (17.6%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">End-stage renal disease</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>141,982 (99.3%)</td>
<td>71,541 (99.7%)</td>
<td>70,441 (98.8%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">1,072 (0.7%)</td>
<td class="lastrow">233 (0.3%)</td>
<td class="lastrow">839 (1.2%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Heart failure w/ reduced EF</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>140,196 (98.0%)</td>
<td>70,510 (98.2%)</td>
<td>69,686 (97.8%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">2,858 (2.0%)</td>
<td class="lastrow">1,264 (1.8%)</td>
<td class="lastrow">1,594 (2.2%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Coronary heart disease</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>135,114 (94.4%)</td>
<td>69,032 (96.2%)</td>
<td>66,082 (92.7%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">7,940 (5.6%)</td>
<td class="lastrow">2,742 (3.8%)</td>
<td class="lastrow">5,198 (7.3%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Prior coronary revascularization</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>142,326 (99.5%)</td>
<td>71,632 (99.8%)</td>
<td>70,694 (99.2%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">728 (0.5%)</td>
<td class="lastrow">142 (0.2%)</td>
<td class="lastrow">586 (0.8%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Prior stroke or TIA</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>140,762 (98.4%)</td>
<td>71,465 (99.6%)</td>
<td>69,297 (97.2%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">2,292 (1.6%)</td>
<td class="lastrow">309 (0.4%)</td>
<td class="lastrow">1,983 (2.8%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Peripheral arterial disease</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>133,666 (93.4%)</td>
<td>70,291 (97.9%)</td>
<td>63,375 (88.9%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">9,388 (6.6%)</td>
<td class="lastrow">1,483 (2.1%)</td>
<td class="lastrow">7,905 (11.1%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">History of clinical ASCVD</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>125,638 (87.8%)</td>
<td>67,545 (94.1%)</td>
<td>58,093 (81.5%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">17,416 (12.2%)</td>
<td class="lastrow">4,229 (5.9%)</td>
<td class="lastrow">13,187 (18.5%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Atrial fibrillation</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>133,030 (93.0%)</td>
<td>70,399 (98.1%)</td>
<td>62,631 (87.9%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">10,024 (7.0%)</td>
<td class="lastrow">1,375 (1.9%)</td>
<td class="lastrow">8,649 (12.1%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Chronic obstructive pulmonary disease</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>135,285 (94.6%)</td>
<td>67,186 (93.6%)</td>
<td>68,099 (95.5%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">7,769 (5.4%)</td>
<td class="lastrow">4,588 (6.4%)</td>
<td class="lastrow">3,181 (4.5%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Asthma</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>136,988 (95.8%)</td>
<td>66,919 (93.2%)</td>
<td>70,069 (98.3%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">6,066 (4.2%)</td>
<td class="lastrow">4,855 (6.8%)</td>
<td class="lastrow">1,211 (1.7%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Depression</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>117,364 (82.0%)</td>
<td>61,104 (85.1%)</td>
<td>56,260 (78.9%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">25,690 (18.0%)</td>
<td class="lastrow">10,670 (14.9%)</td>
<td class="lastrow">15,020 (21.1%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Combined Comorbidity Score</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel lastrow">Mean ± SD</td>
<td class="lastrow">2.54 ± 3.53</td>
<td class="lastrow">1.57 ± 2.82</td>
<td class="lastrow">3.51 ± 3.89</td>
</tr>
<tr>
<td class="rowlabel firstrow">Statin</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>111,633 (78.0%)</td>
<td>58,573 (81.6%)</td>
<td>53,060 (74.4%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">31,421 (22.0%)</td>
<td class="lastrow">13,201 (18.4%)</td>
<td class="lastrow">18,220 (25.6%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Aspirin</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">0</td>
<td>131,391 (91.8%)</td>
<td>65,659 (91.5%)</td>
<td>65,732 (92.2%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">1</td>
<td class="lastrow">11,663 (8.2%)</td>
<td class="lastrow">6,115 (8.5%)</td>
<td class="lastrow">5,548 (7.8%)</td>
</tr>
<tr>
<td class="rowlabel firstrow">Index Year</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr>
<td class="rowlabel">2012</td>
<td>32 (0.0%)</td>
<td>1 (0.0%)</td>
<td>31 (0.0%)</td>
</tr>
<tr>
<td class="rowlabel">2013</td>
<td>17,728 (12.4%)</td>
<td>485 (0.7%)</td>
<td>17,243 (24.2%)</td>
</tr>
<tr>
<td class="rowlabel">2014</td>
<td>31,711 (22.2%)</td>
<td>11,457 (16.0%)</td>
<td>20,254 (28.4%)</td>
</tr>
<tr>
<td class="rowlabel">2015</td>
<td>27,205 (19.0%)</td>
<td>11,039 (15.4%)</td>
<td>16,166 (22.7%)</td>
</tr>
<tr>
<td class="rowlabel">2016</td>
<td>19,283 (13.5%)</td>
<td>10,664 (14.9%)</td>
<td>8,619 (12.1%)</td>
</tr>
<tr>
<td class="rowlabel">2017</td>
<td>18,661 (13.0%)</td>
<td>9,694 (13.5%)</td>
<td>8,967 (12.6%)</td>
</tr>
<tr>
<td class="rowlabel">2018</td>
<td>8,963 (6.3%)</td>
<td>8,963 (12.5%)</td>
<td>0 (0%)</td>
</tr>
<tr>
<td class="rowlabel">2019</td>
<td>8,164 (5.7%)</td>
<td>8,164 (11.4%)</td>
<td>0 (0%)</td>
</tr>
<tr>
<td class="rowlabel">2020</td>
<td>7,520 (5.3%)</td>
<td>7,520 (10.5%)</td>
<td>0 (0%)</td>
</tr>
<tr>
<td class="rowlabel lastrow">2021</td>
<td class="lastrow">3,787 (2.6%)</td>
<td class="lastrow">3,787 (5.3%)</td>
<td class="lastrow">0 (0%)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Can also save Table 1 for posterity, or to export as a CSV</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># would just need to uncomment the following code</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># t1 &lt;- as.data.frame(table1(strata_t1, labels_t1, droplevels = TRUE,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#                            render.continuous = render.continuous, render.strat = render.strat, render.categorical = render.categorical))</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(t1, file = "path_to_directory/Table 1.csv")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that this output still needs a bit of editing, e.g., copying the data in the ‘1’ row for the various indicators, up to the the row with the respective label, and then deleting the ‘0’ row and what was the ‘1’ row. I think a modification can probably be built into the package to do this routinely, or as an option, but I haven’t had time to fool with it. In any event, this gets us pretty close.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>